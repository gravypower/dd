name: dd add-on
slug: dd
version: "0.0.2"
image: "ghcr.io/gravypower/{arch}-addon-dd"
description: dd add-on
url: "https://github.com/gravypower/dd/tree/master/dd"
startup: services

services:
  mqtt: need

arch:
  - armhf
  - armv7
  - aarch64
  - amd64
  - i386

map:
  config: rw

options:
  code: ""
  password: ""
  host: ""
  mqtt: {}

schema:
  code: "str"
  password: "str"
  host:
    type: "str"
    pattern: "^(?!-)[A-Za-z0-9-]+(\\.[A-Za-z0-9-]+)*$|^(\\d{1,3}\\.){3}\\d{1,3}$|^\\[([a-fA-F0-9:]+)\\]$"
  mqtt:
    server:
      type: "str?"
      pattern: "^mqtt(s)?://.+"
    port:
      type: "int?"
      minimum: 1
      maximum: 65535
    ca: "str?"
    key: "str?"
    cert: "str?"
    user: "str?"
    password: "str?"
